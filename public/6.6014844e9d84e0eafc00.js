(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{"6ZY7":function(t,e,n){"use strict";n.r(e);var u=n("CcnG"),o=function(){return function(){}}(),l=n("y5Pl"),r=n("M+1Z"),i=n("JEFa"),s=n("pMnS"),c=n("aQxW"),a=n("NMrR"),d=n("cyBs"),b=n("OMr1"),p=n("Ip0R"),m=function(t){return t.CUSTOMERS_QUERY="[Customers] Query",t.CUSTOMERS_LOADED="[Customers] Fetched",t.CUSTOMERS_ADDED="[Customers] Added",t.CUSTOMERS_EDITED="[Customers] Edited",t.CUSTOMERS_DELETED="[Customers] Deleted",t.CUSTOMERS_ERROR="[Customers] Error",t}({}),f=function(){return function(){this.type=m.CUSTOMERS_QUERY}}(),h=function(){return function(t){this.payload=t,this.type=m.CUSTOMERS_LOADED}}(),O=function(){return function(t){this.payload=t,this.type=m.CUSTOMERS_ADDED}}(),R=function(){return function(t){this.payload=t,this.type=m.CUSTOMERS_EDITED}}(),y=function(){return function(t){this.payload=t,this.type=m.CUSTOMERS_DELETED}}(),E=function(){return function(t){this.payload=t,this.type=m.CUSTOMERS_ERROR}}(),j=n("yGQT"),S=Object(j.v)("customers"),C=Object(j.x)(S,(function(t){return t.customers})),g=Object(j.x)(S,(function(t){return t.isLoading})),v=(Object(j.x)(S,(function(t){return t.error})),n("67Y/")),D=n("t9fZ"),_=n("d2bA"),M=n("h9cb"),w=function(){function t(t,e,n){this.modalService=t,this.store=e,this.afAuth=n,this.modalConfig={class:"modal-dialog-centered"}}return t.prototype.ngOnInit=function(){var t=this;this.isLoading$=this.store.select(g),this.customersSub=this.store.select(C).pipe(Object(v.a)((function(e){return t.user&&!e&&t.store.dispatch(new f),e}))).subscribe((function(e){if(e&&0!==e.length){var n=Number(e[e.length-1].id);t.lastCustomerIndex=n}else t.lastCustomerIndex=0;t.customers=e}))},Object.defineProperty(t.prototype,"user",{get:function(){return this.afAuth.auth.currentUser},enumerable:!0,configurable:!0}),t.prototype.ngOnDestroy=function(){this.customersSub&&this.customersSub.unsubscribe()},t.prototype.onAddCustomer=function(){var t=this;this.modalRef=this.modalService.show(M.a,this.modalConfig),this.modalRef.content.heading="Add new customer",this.modalRef.content.customer.id=this.lastCustomerIndex+1,this.modalRef.content.customerData.pipe(Object(D.a)(1)).subscribe((function(e){t.store.dispatch(new O({customer:e}))}))},t.prototype.openEditCustomerModal=function(t){var e=this;this.modalRef=this.modalService.show(M.a,this.modalConfig),this.modalRef.content.heading="Edit customer",this.modalRef.content.customer={key:t.key,id:t.id||null,name:t.name||null,description:t.description||null},this.modalRef.content.customerData.pipe(Object(D.a)(1)).subscribe((function(t){e.store.dispatch(new R({customer:t}))}))},t.prototype.openConfirmModal=function(t){var e=this;this.modalRef=this.modalService.show(_.a,this.modalConfig),this.modalRef.content.confirmation.pipe(Object(D.a)(1)).subscribe((function(n){n&&e.store.dispatch(new y({customer:t}))}))},t.prototype.onCustomerEdit=function(t){this.openEditCustomerModal(t)},t.prototype.onCustomerDelete=function(t){this.openConfirmModal(t)},t}(),T=n("ZBkt"),U=u.Fb({encapsulation:0,styles:[[""]],data:{}});function k(t){return u.cc(0,[(t()(),u.Hb(0,0,null,null,2,"div",[["class","mt-4 white"]],null,null,null,null,null)),(t()(),u.Hb(1,0,null,null,1,"app-customers-list",[],null,[[null,"customerEdited"],[null,"customerDeleted"]],(function(t,e,n){var u=!0,o=t.component;return"customerEdited"===e&&(u=!1!==o.onCustomerEdit(n)&&u),"customerDeleted"===e&&(u=!1!==o.onCustomerDelete(n)&&u),u}),c.b,c.a)),u.Gb(2,114688,null,0,a.a,[],{customers:[0,"customers"]},{customerDeleted:"customerDeleted",customerEdited:"customerEdited"})],(function(t,e){t(e,2,0,e.component.customers)}),null)}function H(t){return u.cc(0,[(t()(),u.Hb(0,0,null,null,3,"div",[["class","d-flex justify-content-center align-items-center"],["style","margin-top: 200px"]],null,null,null,null,null)),(t()(),u.Hb(1,0,null,null,2,"div",[["class","spinner-grow text-primary"],["role","status"],["style","width: 4rem; height: 4rem;"]],null,null,null,null,null)),(t()(),u.Hb(2,0,null,null,1,"span",[["class","sr-only"]],null,null,null,null,null)),(t()(),u.ac(-1,null,["Loading..."]))],null,null)}function I(t){return u.cc(0,[(t()(),u.Hb(0,0,null,null,4,"div",[["class","white px-4 section-header"]],null,null,null,null,null)),(t()(),u.Hb(1,0,null,null,1,"h3",[],null,null,null,null,null)),(t()(),u.ac(-1,null,["Customers list"])),(t()(),u.Hb(3,0,null,null,1,"p",[["class","grey-text pt-3"]],null,null,null,null,null)),(t()(),u.ac(-1,null,["Manage your customers list"])),(t()(),u.Hb(5,0,null,null,9,"div",[["class","container-fluid pt-5 pb-5"]],null,null,null,null,null)),(t()(),u.Hb(6,0,null,null,8,"div",[["class","pt-3 pb-5"]],null,null,null,null,null)),(t()(),u.Hb(7,0,null,null,2,"button",[["color","primary"],["mdbBtn",""]],null,[[null,"click"]],(function(t,e,n){var u=!0;return"click"===e&&(u=!1!==t.component.onAddCustomer()&&u),u}),d.s,d.g)),u.Gb(8,638976,null,0,b.G,[u.q,u.Q],{color:[0,"color"]},null),(t()(),u.ac(-1,0,["Add new customer"])),(t()(),u.wb(16777216,null,null,1,null,k)),u.Gb(11,16384,null,0,p.k,[u.eb,u.Z],{ngIf:[0,"ngIf"]},null),(t()(),u.wb(16777216,null,null,2,null,H)),u.Gb(13,16384,null,0,p.k,[u.eb,u.Z],{ngIf:[0,"ngIf"]},null),u.Ub(131072,p.b,[u.j])],(function(t,e){var n=e.component;t(e,8,0,"primary"),t(e,11,0,n.customers),t(e,13,0,u.bc(e,13,0,u.Tb(e,14).transform(n.isLoading$)))}),null)}function A(t){return u.cc(0,[(t()(),u.Hb(0,0,null,null,1,"app-customers",[],null,null,null,I,U)),u.Gb(1,245760,null,0,w,[b.C,j.n,T.a],null,null)],(function(t,e){t(e,1,0)}),null)}var L=u.Db("app-customers",w,A,{},{},[]),$=n("gIcY"),x=n("PCNd"),Q=n("ZYCi"),Z=function(){return function(){}}(),G={customers:null,isLoading:!0,error:null};function Y(t,e){switch(void 0===t&&(t=G),e.type){case m.CUSTOMERS_QUERY:return Object.assign({},t,{isLoading:!0});case m.CUSTOMERS_LOADED:return Object.assign({},t,{customers:e.payload.customers,isLoading:!1});case m.CUSTOMERS_ERROR:return Object.assign({},t,{isLoading:!1,error:e.payload.error});default:return t}}var F=n("mrSG"),J=n("jYNz"),N=n("/PH2"),P=n("15JJ"),q=n("9Z1F"),z=n("F/XL"),B=n("Xd88"),K=function(){function t(t,e,n){var u=this;this.actions$=t,this.customersService=e,this.store=n,this.query$=this.actions$.pipe(Object(J.f)(m.CUSTOMERS_QUERY),Object(N.a)(this.store.pipe(Object(j.y)(B.e))),Object(P.a)((function(t){return u.customersService.get(t[1].uid).pipe(Object(v.a)((function(t){var e=t.map((function(t){var e=t.payload.key,n=t.payload.val();return{key:e,id:n.id,name:n.name,description:n.description}}));return new h({customers:e})})),Object(q.a)((function(t){return Object(z.a)(new E({error:t}))})))}))),this.added$=this.actions$.pipe(Object(J.f)(m.CUSTOMERS_ADDED),Object(v.a)((function(t){return t.payload})),Object(N.a)(this.store.pipe(Object(j.y)(B.e))),Object(P.a)((function(t){return u.customersService.add(t[0].customer,t[1].uid)}))),this.edit$=this.actions$.pipe(Object(J.f)(m.CUSTOMERS_EDITED),Object(v.a)((function(t){return t.payload})),Object(N.a)(this.store.pipe(Object(j.y)(B.e))),Object(P.a)((function(t){return u.customersService.update(t[0].customer,t[1].uid).pipe(Object(q.a)((function(t){return Object(z.a)(new E({error:t}))})))}))),this.delete$=this.actions$.pipe(Object(J.f)(m.CUSTOMERS_DELETED),Object(v.a)((function(t){return t.payload})),Object(N.a)(this.store.pipe(Object(j.y)(B.e))),Object(P.a)((function(t){return u.customersService.delete(t[0].customer,t[1].uid)})))}return Object(F.__decorate)([Object(J.b)(),Object(F.__metadata)("design:type",Object)],t.prototype,"query$",void 0),Object(F.__decorate)([Object(J.b)({dispatch:!1}),Object(F.__metadata)("design:type",Object)],t.prototype,"added$",void 0),Object(F.__decorate)([Object(J.b)({dispatch:!1}),Object(F.__metadata)("design:type",Object)],t.prototype,"edit$",void 0),Object(F.__decorate)([Object(J.b)({dispatch:!1}),Object(F.__metadata)("design:type",Object)],t.prototype,"delete$",void 0),t}(),X=n("7dA5");n.d(e,"CustomersModuleNgFactory",(function(){return W}));var W=u.Eb(o,[],(function(t){return u.Qb([u.Rb(512,u.m,u.pb,[[8,[l.a,r.a,i.a,s.a,L,d.c,d.d,d.b]],[3,u.m],u.I]),u.Rb(4608,p.m,p.l,[u.D,[2,p.y]]),u.Rb(4608,$.u,$.u,[]),u.Rb(4608,b.U,b.U,[]),u.Rb(1073742336,p.c,p.c,[]),u.Rb(1073742336,b.w,b.w,[]),u.Rb(1073742336,b.v,b.v,[]),u.Rb(1073742336,b.u,b.u,[]),u.Rb(1073742336,$.t,$.t,[]),u.Rb(1073742336,$.i,$.i,[]),u.Rb(1073742336,b.h,b.h,[]),u.Rb(1073742336,b.i,b.i,[]),u.Rb(1073742336,x.a,x.a,[]),u.Rb(1073742336,Q.o,Q.o,[[2,Q.t],[2,Q.k]]),u.Rb(1073742336,Z,Z,[]),u.Rb(1073742336,b.Z,b.Z,[]),u.Rb(1073742336,b.kb,b.kb,[]),u.Rb(1024,j.I,(function(){return[{}]}),[]),u.Rb(1024,j.j,(function(){return[{key:"customers",reducerFactory:j.s,metaReducers:[],initialState:void 0}]}),[]),u.Rb(1024,j.J,j.P,[u.z,j.I,j.j]),u.Rb(1024,j.H,(function(){return[Y]}),[]),u.Rb(1024,j.K,(function(t){return[t]}),[j.H]),u.Rb(1024,j.b,(function(t,e,n){return[j.Q(t,e,n)]}),[u.z,j.H,j.K]),u.Rb(1073873408,j.o,j.o,[j.J,j.b,j.g,j.p]),u.Rb(512,K,K,[J.a,X.a,j.n]),u.Rb(1024,J.k,(function(t){return[J.g(t)]}),[K]),u.Rb(1073742336,J.d,J.d,[J.e,J.k,[2,j.p],[2,j.o]]),u.Rb(1073742336,o,o,[]),u.Rb(1024,Q.i,(function(){return[[{path:"",component:w}]]}),[])])}))}}]);